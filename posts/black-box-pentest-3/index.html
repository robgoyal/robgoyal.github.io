<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="PTS: Black-Box Penetration Test 3" /><meta name="author" content="Robin Goyal" /><meta property="og:locale" content="en" /><meta name="description" content="This is the 3rd writeup of 3 black-box penetration tests offered in INE’s Penetration Testing Student course that I am currently doing in my journey to obtain the eJPT certification." /><meta property="og:description" content="This is the 3rd writeup of 3 black-box penetration tests offered in INE’s Penetration Testing Student course that I am currently doing in my journey to obtain the eJPT certification." /><link rel="canonical" href="https://robgoyal.github.io/posts/black-box-pentest-3/" /><meta property="og:url" content="https://robgoyal.github.io/posts/black-box-pentest-3/" /><meta property="og:site_name" content="Robin Goyal" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-22T11:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="PTS: Black-Box Penetration Test 3" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Robin Goyal"},"dateModified":"2021-08-22T11:00:00-04:00","datePublished":"2021-08-22T11:00:00-04:00","description":"This is the 3rd writeup of 3 black-box penetration tests offered in INE’s Penetration Testing Student course that I am currently doing in my journey to obtain the eJPT certification.","headline":"PTS: Black-Box Penetration Test 3","mainEntityOfPage":{"@type":"WebPage","@id":"https://robgoyal.github.io/posts/black-box-pentest-3/"},"url":"https://robgoyal.github.io/posts/black-box-pentest-3/"}</script><title>PTS: Black-Box Penetration Test 3 | Robin Goyal</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Robin Goyal"><meta name="application-name" content="Robin Goyal"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profilepic.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Robin Goyal</a></div><div class="site-subtitle font-italic">Software Developer & Cybersecurity Enthusiast</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="/resume.pdf" aria-label="resume" class="order-3" > <i class="fas fa-file-alt"></i> </a> <a href="https://github.com/robgoyal" aria-label="github" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['robin.goyal.swd','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/robingoyal" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>PTS: Black-Box Penetration Test 3</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>PTS: Black-Box Penetration Test 3</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Robin Goyal </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Aug 22, 2021, 11:00 AM -0400" >Aug 22, 2021<i class="unloaded">2021-08-22T11:00:00-04:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1601 words">8 min read</span></div></div><div class="post-content"><p>This is the 3<sup>rd</sup> writeup of 3 black-box penetration tests offered in INE’s Penetration Testing Student course that I am currently doing in my journey to obtain the eJPT certification.</p><h2 id="scenario">Scenario</h2><blockquote><p>You have been engaged in a Black-box Penetration Test (172.16.37.0/24 range). Your goal is to read the flag file on each machine. On some of them, you will be required to exploit a remote code execution vulnerability in order to read the flag.</p></blockquote><h2 id="initial-enumeration-and-exploitation">Initial Enumeration and Exploitation</h2><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/fping-nmap-scan.jpg" alt="Fping &amp; Nmap Results" /></p><p>The scenario mentioned that the pentest range is taking place at 172.16.37.0/24. However, the VPN has connected us to 10.13.37.1/24 with another machine located at 10.13.37.1 as seen above in the Nmap scan results.</p><p>With no open ports on the 10.13.37.1 host, I thought this may be a gateway into the 172.16.37.0/24 range that we are engaged to do the pentest on. As I combed through previous documentation to recall how to add this route to the routing, it seems that the VPN connection already added that route to our table!</p><p>We can perform a typical scan on the assigned range to determine the available targets!</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/fping-nmap-scenario-subnet-scan.jpg" alt="Scenario Scan Results" /></p><h3 id="17216371">172.16.37.1</h3><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.1/nmap.jpg" alt="172.16.37.1 Nmap Results" /></p><p>This target has no open ports but similar to the 10.13.37.1 machine, this may be a gateway to another network.</p><h3 id="1721637220">172.16.37.220</h3><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.220/nmap.jpg" alt="172.16.37.220 Nmap Results" /></p><h4 id="http">HTTP</h4><p>The details provided by the Nmap scan reveal that port 80 is served by Apache on an Ubuntu OS.</p><p>The landing page contains no visible data but the page source contains a comment with what appears to be the output of ifconfig.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.220/http-source.jpg" alt="Dual Homed Target" /></p><p>This target is dual homed with access to an additional network in the 172.16.50.0/24 range. If we are able to compromise this machine, there might be an opportunity to pivot through this network and compromise additional systems.</p><p>Other than the leaked network interface information in the page source, there is not much else to see here.</p><h4 id="3307">3307</h4><p>A tcpwrapped port means that we are not able to send or receive data with that port. This could be a firewall or an access control list that is blocking us from accesing that port. An attempt to establish a connection with netcat is closed instantly.</p><p>For now, we have some information but not much to go off of so let’s continue with the next machine.</p><h3 id="1721636234">172.16.36.234</h3><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/nmap.jpg" alt="172.16.37.234 Nmap Results" /></p><p>The FTP and HTTP services are running on non-standard ports on an Ubuntu OS.</p><h4 id="ftp">FTP</h4><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/ftp-login.jpg" alt="172.16.37.234 FTP Login" /></p><p>The banner for the ProFTPD service includes a comment to use ftpuser to authenticate. On a hunch, I also used the same for the password which authenticated us to the application.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/ftp-flag.jpg" alt="172.16.37.234 Ftp Flag Location" /></p><p>After successful authentication to the FTP server, the flag is available as a hidden text file along with an additional html folder.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/ftp-xyz.jpg" alt="172.16.37.234 Ftp XYZ Directory" /></p><p>It seems that the directory that the FTP daemon is serving could be the same files that the web application is serving. If the ftpuser has write permissions to any of the directories, this would be a vector for remote code execution.</p><p>I pulled the index.php and .flag.txt files as the index.html is likely the Apache landing page. We can verify this when we explore the HTTP service.</p><div lang="plaintext" class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre># .flag.txt
You got the first machine!
</pre></table></code></div></div><div lang="php" class="language-php highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre># /xyz/index.php

<span class="cp">&lt;?php</span>

<span class="k">echo</span> <span class="s2">"&lt;!-- cmd: "</span> <span class="mf">.</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s2">"cmd"</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"--&gt;"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"&lt;hr /&gt;"</span><span class="p">;</span>

<span class="nb">system</span><span class="p">(</span><span class="s2">"ifconfig"</span><span class="p">);</span>

<span class="cp">?&gt;</span>
</pre></table></code></div></div><p>The index.php file in the xyz directory executes the ifconfig command which should be displayed on the web page if we browse to that endpoint.</p><h4 id="http-1">HTTP</h4><p>Visting the web application, both of our assumptions are confirmed. The Apache landing page relates to the index.html file and the index.php displays the network interface configuration for this target.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/ifconfig.jpg" alt="172.16.37.234 Ifconfig" /></p><p>This target is also dual-homed similar to the first one. We can attempt to create a reverse shell connection with a netcat listener on our attacker machine.</p><p>Configuring the PHP reverse shell with our tap0 IP address and any port, put the file onto the FTP server <sup id="fnref:pentest-monkey-reverse-shell" role="doc-noteref"><a href="#fn:pentest-monkey-reverse-shell" class="footnote" rel="footnote">1</a></sup> .</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/ftp-transfer.jpg" alt="172.16.37.234 FTP Transfer" /></p><p>Success! Now we can browse to http://172.16.37.234:40180/xyz/rev.php to trigger the reverse shell connection.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/reverse-shell.jpg" alt="172.16.37.234 Reverse Shell" /></p><p>Let’s upgrade this basic shell into a fully interactive TTY shell <sup id="fnref:shell-upgrade" role="doc-noteref"><a href="#fn:shell-upgrade" class="footnote" rel="footnote">2</a></sup>.</p><p>Currently, we are the www-data user. In the search for any interesting files, I found a .message data file burrowed in some very lengthy named directories under the elsuser’s home directory. The data was just some binary data with ASCII text thrown in there but it seems this was a rabbit hole to potentially throw us off?</p><p>A common step in the privilege escalation vector is to analyze the /etc/passwd file to see the list of system and non-system users.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/passwd.jpg" alt="172.16.37.234 Passwd" /></p><p>There are three additional users that are not root or the service users.</p><ul><li>elsuser<li>ftpuser<li>test</ul><p>Without realizing it, I switched to the ftpuser hoping that the credentials from the FTP service were the same. Once we were authenticated, the prompt said <code class="language-plaintext highlighter-rouge">root@xubuntu</code>. The <code class="language-plaintext highlighter-rouge">whoami</code> command stated that we were root as well even though I logged in as the ftpuser.</p><p>The official writeup verified that this is because the uid and gid of the ftpuser is 0 which is the root user.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/root.jpg" alt="172.16.37.234 Root" /></p><p>Success regardless! With this target compromised and our privileges escalated, let’s perform some post-exploitation techniques and perform a scan of the targets on the 172.16.50.0/24 network. We are already aware of 2 targets, 172.16.50.222 (first target) and 172.16.50.224 (this target).</p><p>Fortunately for us, this target has nmap installed so we can leverage that to perform a network scan.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.37.234/nmap-hidden-network.jpg" alt="172.16.37.234 Nmap Hidden" /></p><p>Looks like there are only two machines on this network which we have already interacted with. There may be other services on the 1<sup>st</sup> machine that are only accessible through this second network so let’s perform some further enumeration of the 1<sup>st</sup> machine but on the 172.16.50.222 interface.</p><h3 id="1721650222">172.16.50.222</h3><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.50.222/nmap.jpg" alt="172.16.50.222 Nmap" /></p><p>Compared to the original Nmap scan for this target but using the 172.16.37.220 interface, there is an additional SSH service accessible to us. Given the small hint about using ncrack’s minimal.usr password list, we can attempt to brute force the authentication for the root user to the SSH service.</p><p>We could attempt to brute force using hydra and the password list by transferring the binary and wordlist onto the compromised machine. This lab, however, is focused on pivoting and this is a good opportunity for us to learn about how to pivot. There are several ways to accomplish this:</p><ul><li>Metasploit’s autoroute functionality<li>Enable SSH for the ftpuser and enable that for a sock5 proxy<li>Ncat and proxychains <sup id="fnref:ncat-pivot" role="doc-noteref"><a href="#fn:ncat-pivot" class="footnote" rel="footnote">3</a></sup></ul><p>We’ll try out the ncat and proxychains method to establish an HTTP proxy. On the compromised machine, configure an HTTP proxy using Ncat on port 3128 with the command <code class="language-plaintext highlighter-rouge">ncat -vv --listen 3128 --proxy-type http</code> .</p><p>Switching back to the attacker machine, add a line to the end of the /etc/proxychains.conf file with <code class="language-plaintext highlighter-rouge">http 172.16.37.234 3128</code> . To proxy any command through the proxychains.conf file, prefix that command with <code class="language-plaintext highlighter-rouge">proxychains</code>.</p><p>At this stage, our goal is to use proxychains to proxy our brute force attempts on the SSH service that is accessible through the 172.16.50.0/24 network.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.50.222/proxychains-hydra.jpg" alt="172.16.50.222 Proxychains Hydra" /></p><p>Woot! The root user on the 1<sup>st</sup> target machine has a password of root (terrible password security). But the power of a proxy with proxychains causes pivoting to be incredibly simple.</p><p>The last step is to use proxychains to proxy our SSH connection through the compromised machine and grab the remaining flag.</p><p><img data-proofer-ignore data-src="/assets/img/posts/black-box-pentest-3/172.16.50.222/flag.jpg" alt="172.16.50.222 Flag" /></p><p>With this flag, we have successfully completed this penetration test.</p><h2 id="reflection">Reflection</h2><p>This pentest was a significantly easier experience than the 2<sup>nd</sup> that I had so much trouble with. This was definitely focused on the concept of pivoting and accessing additional networks so it may be more difficult in some sense.</p><p>I enjoyed this last one and it may have been even more interesting to have a 3<sup>rd</sup> target in the 2<sup>nd</sup> network but who knows, that may be the configuration on the eJPT exam.</p><p>Either way, this was a fantastic learning opportunity and the only hiccup I had was not understanding why switching to the ftpuser placed me as root but now, I’ll remember to thoroughly analyze the /etc/passwd file and all aspects of it.</p><p>This was the last black-box pentest offered by INE as part of their Penetration Testing Student course. Some forums have indicated that the pentest labs are more challenging than the actual certification exam. Out of the three pentests, I think there were 2 or 3 very minor situations that revolved around not fully mapping out an application or service but I think I may be ready for the exam. Hopefully, the next post that I submit is a success post about my exam experience.</p><h2 id="useful-commands">Useful Commands</h2><h3 id="shell-upgrade">Shell Upgrade</h3><p>Upgrading your shell into an interactive TTY shell is important so you can switch between users. Without a TTY, you won’t receive the prompt to enter passwords.</p><p>Once you have a shell, determine the version of Python and spawn a Bash process.</p><div lang="bash" class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>which python
python<span class="o">{</span>2,3<span class="o">}</span> <span class="nt">-c</span> <span class="s1">'import pty; pty.spawn("/bin/bash")'</span>
</pre></table></code></div></div><p>Background the shell using Ctrl+Z.</p><p>In your attacker machine’s terminal, run <code class="language-plaintext highlighter-rouge">stty -a</code> and take note of the number of rows and columns.</p><p>Run <code class="language-plaintext highlighter-rouge">stty raw -echo</code>. At this point, your terminal prompt may be a bit buggy and not display anything. Bring the reverse shell back to the foreground with the <code class="language-plaintext highlighter-rouge">fg</code> command. This may not show up in your terminal but have faith that it’s there.</p><p>Pressing enter a few times and you should now have an interactive prompt. The last thing to do is to modify the rows and coluns of the reverse shell from what you noted down before.</p><p><code class="language-plaintext highlighter-rouge">stty rows &lt;rows&gt; columns &lt;columns&gt;</code></p><h3 id="nmap-host-discovery">Nmap Host Discovery</h3><p>To perform a host discovery scan without port scanning:</p><p><code class="language-plaintext highlighter-rouge">nmap -sn 10.13.37.0/24</code></p><h2 id="references">References</h2><div class="footnotes" role="doc-endnotes"><ol><li id="fn:pentest-monkey-reverse-shell" role="doc-endnote"><p><a href="https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php">https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php</a> <a href="#fnref:pentest-monkey-reverse-shell" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:shell-upgrade" role="doc-endnote"><p><a href="https://blog.ropnop.com/upgrading-simple-shells-to-fully-interactive-ttys/">https://blog.ropnop.com/upgrading-simple-shells-to-fully-interactive-ttys/</a> <a href="#fnref:shell-upgrade" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:ncat-pivot" role="doc-endnote"><p><a href="https://nullsweep.com/pivot-cheatsheet-for-pentesters/">https://nullsweep.com/pivot-cheatsheet-for-pentesters/</a> <a href="#fnref:ncat-pivot" class="reversefootnote" role="doc-backlink">&#8617;</a></p></ol></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cybersecurity/'>Cybersecurity</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ine/" class="post-tag no-text-decoration" >INE</a> <a href="/tags/pts/" class="post-tag no-text-decoration" >PTS</a> <a href="/tags/ejpt/" class="post-tag no-text-decoration" >eJPT</a> <a href="/tags/pentesting/" class="post-tag no-text-decoration" >pentesting</a> <a href="/tags/writeup/" class="post-tag no-text-decoration" >writeup</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=PTS: Black-Box Penetration Test 3 - Robin Goyal&url=https://robgoyal.github.io/posts/black-box-pentest-3/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=PTS: Black-Box Penetration Test 3 - Robin Goyal&u=https://robgoyal.github.io/posts/black-box-pentest-3/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://robgoyal.github.io/posts/black-box-pentest-3/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', 'Link copied successfully!')" data-toggle="tooltip" data-placement="top" title="Copy link"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/configure-raspberry-pi-from-scratch/">Configure a Raspberry Pi from scratch</a><li><a href="/posts/pbs-rpi/">Proxmox Backup Server on Raspberry Pi</a><li><a href="/posts/thm-basic-pentesting/">Basic Pentesting (Try Hack Me)</a><li><a href="/posts/thm-gamezone/">Gamezone (Try Hack Me)</a><li><a href="/posts/thm-overpass/">Overpass (Try Hack Me)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/writeup/">writeup</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/thm/">thm</a> <a class="post-tag" href="/tags/privesc/">privesc</a> <a class="post-tag" href="/tags/web-application/">web application</a> <a class="post-tag" href="/tags/ejpt/">eJPT</a> <a class="post-tag" href="/tags/ftp/">ftp</a> <a class="post-tag" href="/tags/reverse-shell/">reverse shell</a> <a class="post-tag" href="/tags/brute-force/">brute force</a> <a class="post-tag" href="/tags/ine/">INE</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/black-box-pentest-1/"><div class="card-body"> <span class="timeago small" >Aug 18, 2021<i class="unloaded">2021-08-18T18:00:00-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>PTS: Black-Box Penetration Test 1</h3><div class="text-muted small"><p> This is the 1st writeup of 3 black-box penetration tests offered in INE’s Penetration Testing Student course that I am currently doing in my journey to obtain the eJPT certification. Scenario ...</p></div></div></a></div><div class="card"> <a href="/posts/black-box-pentest-2/"><div class="card-body"> <span class="timeago small" >Aug 21, 2021<i class="unloaded">2021-08-21T12:00:00-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>PTS: Black-Box Penetration Test 2</h3><div class="text-muted small"><p> This is the 2nd writeup of 3 black-box penetration tests offered in INE’s Penetration Testing Student course that I am currently doing in my journey to obtain the eJPT certification. Scenario ...</p></div></div></a></div><div class="card"> <a href="/posts/thm-basic-pentesting/"><div class="card-body"> <span class="timeago small" >Sep 17, 2021<i class="unloaded">2021-09-17T18:00:00-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Basic Pentesting (Try Hack Me)</h3><div class="text-muted small"><p> I am currently in the process of completing these boxes on Try Hack Me again in an effort to document my experience, reinforce my knowledge of the topics, and improve my ability to concisely commun...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/black-box-pentest-2/" class="btn btn-outline-primary" prompt="Older"><p>PTS: Black-Box Penetration Test 2</p></a> <a href="/posts/ejpt-certification/" class="btn btn-outline-primary" prompt="Newer"><p>eJPT Certified!</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/robgoyal">Robin Goyal</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/writeup/">writeup</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/thm/">thm</a> <a class="post-tag" href="/tags/privesc/">privesc</a> <a class="post-tag" href="/tags/web-application/">web application</a> <a class="post-tag" href="/tags/ejpt/">eJPT</a> <a class="post-tag" href="/tags/ftp/">ftp</a> <a class="post-tag" href="/tags/reverse-shell/">reverse shell</a> <a class="post-tag" href="/tags/brute-force/">brute force</a> <a class="post-tag" href="/tags/ine/">INE</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://robgoyal.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
